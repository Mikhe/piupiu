(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n.n(o),a=n(2),r=n.n(a),i=(n(14),n(3)),c=n(4),l=n(6),h=n(5),f=n(7),p=function(e,t){return Math.abs(Number(e)-Number(t))},d=function(e){return Math.floor(Math.random()*e)},u=function(e){e.position=e.position===e.maxPosition?0:++e.position},x={},m=function(e){this.levelData={color:"#fff",font:"30px Arial",label:"Level:",level:1,x:850,y:30};var t=this.levelData;return t.draw=function(e){var n=t.color,o=t.font,s=t.label,a=t.level,r=t.x,i=t.y,c=e.ctx,l="".concat(s," ").concat(a);c.fillStyle=n,c.font=o,c.fillText(l,r,i)},Object.assign(t,e),t},v=function(e){this.gameData={color:"#fff",font:"45px Arial",label:"Game Over",x:385,y:300};var t=this.gameData;return t.draw=function(e){var n=t.color,o=t.font,s=t.label,a=t.x,r=t.y,i=e.ctx;i.fillStyle=n,i.font=o,i.fillText(s,a,r)},Object.assign(t,e),t},y=function(e){this.lifeData={colors:{baseColor:"#DCDCDC",dangerColor:"#FF0000",fullColor:"#00FF00",middleColor:"#FFFF00"},life:100,r:65,speed:10,width:5};var t=this.lifeData;return t.draw=function(e,n){var o,s=e.ctx,a=e.sniper,r=a.x,i=a.y,c=t.life,l=t.r,h=t.colors,f=t.width;o=c<=30?h.dangerColor:c<=70?h.middleColor:h.fullColor,s.beginPath(),s.lineWidth=f,s.strokeStyle=o,s.arc(r,i,l,Math.PI/180*-90,Math.PI/180*270,!0),s.closePath(),s.stroke(),s.beginPath(),s.lineWidth=f,s.strokeStyle=h.baseColor,s.arc(r,i,l,Math.PI/180*-90,Math.PI/180*(3.6*(100-c)-90)),s.stroke(),s.closePath(),t.life<=0&&"function"==typeof n&&n()},Object.assign(t,e),t},w=function(e){this.scoreData={color:"#fff",font:"30px Arial",label:"Score:",score:0,x:20,y:30};var t=this.scoreData;return t.draw=function(e){var n=t.color,o=t.font,s=t.label,a=t.score,r=t.x,i=t.y,c=e.ctx,l="".concat(s," ").concat(a);c.fillStyle=n,c.font=o,c.fillText(l,r,i)},Object.assign(t,e),t},g=function(e){this.sniperData={x:400,y:300,w:53,h:63,speed:3,position:0,maxPosition:7,isMoving:!1,sniperLastMouseX:0,sniperLastMouseY:0,image:x.sniper};var t=this.sniperData;return t.draw=function(e,n){var o=e.ctx,s=t.h,a=t.image,r=t.isMoving,i=t.sniperLastMouseX,c=t.sniperLastMouseY,l=t.speed,h=t.w,f=t.x,d=t.y,x=l,m=l,v=p(i,f),y=p(c,d);v>y?m=y/v*l:x=v/y*l,r&&(v>l||y>l)?(i>f?t.x+=x:i<f&&(t.x-=x),c>d?t.y+=m:c<d&&(t.y-=m)):t.isMoving=!1,o.save(),o.translate(t.x,t.y),u(t),n.x&&o.rotate(Math.atan2(n.y-t.y,n.x-t.x)+Math.PI/2),o.drawImage(a,r?t.position*h:0,0,h,s,-15,0,h,s),o.rotate(-Math.PI/2);var w=o.createLinearGradient(0,0,700,0);w.addColorStop(0,"#8B1516"),w.addColorStop(1,"#252729"),o.fillStyle=w,o.fillRect(0,-2,1e3,1),o.restore()},Object.assign(t,e),t},M=function(e){this.stepData={x:0,y:0,r:5,maxR:18,speed:.6,style:"#8B1516",isStarted:!1,width:2};var t=this.stepData;return t.draw=function(e,n){var o=e.ctx,s=t.isStarted,a=t.maxR,r=t.r,i=t.speed,c=t.style,l=t.width,h=t.x,f=t.y;o.beginPath(),o.strokeStyle=c,o.lineWidth=l,s?(o.arc(h,f,r,0,2*Math.PI),t.r+=i,t.r>a&&"function"==typeof n&&n()):(o.arc(h,f,r,0,2*Math.PI),t.isStarted=!0),o.closePath(),o.stroke()},Object.assign(t,e),t},b=function(e){this.explosionData={x:0,y:0,w:128,h:128,position:0,image:x.explosion};var t=this.explosionData;return t.draw=function(e,n){var o=e.ctx,s=t.h,a=t.image,r=t.position,i=t.w,c=t.x,l=t.y;if(82!==r){var h=Math.ceil(r/2);o.drawImage(a,h*i,0,i,s,c-64,l-64,i,s),t.position++}else"function"==typeof n&&n()},Object.assign(t,e),t},k=function(e){this.rocketData={mx:0,my:0,w:26,h:49,px:0,py:0,x:0,y:0,speed:16,position:0,maxPosition:3,image:x.rocket};var t=this.rocketData;return t.checkTargets=function(e){var n=t.x,o=t.y,s=e.monsters,a=s.length;e.monsters=s.filter(function(e){var t=p(e.x,n),s=p(e.y,o);return!(t<20&&s<20)});var r=a!==e.monsters.length;return r&&(e.score.score++,e.score.score===e.settings.levelUp*e.level.level&&(e.level.level++,e.settings.monsterSpeed+=1)),r},t.draw=function(e,n){var o=e.explosions,s=e.ctx,a=t.checkTargets,r=t.h,i=t.image,c=t.speed,l=t.position,h=t.px,f=t.py,d=t.w,x=t.x,m=t.y,v=a(e),y=c,w=c,g=p(h,x),M=p(f,m);if(g>M?w=M/g*c:y=g/M*c,v||g<c&&M<c)return o.push(new b({x:x,y:m})),void("function"==typeof n&&n());h>x?t.x+=y:h<x&&(t.x-=y),f>m?t.y+=w:f<m&&(t.y-=w),s.save(),s.translate(t.x,t.y),h&&s.rotate(Math.atan2(f-t.y,h-t.x)+Math.PI/2),u(t),s.drawImage(i,l*d,0,d,r,-12,-31,d,r),s.restore()},Object.assign(t,e),t},I=function(e){this.monsterData={w:42,h:31,speed:e.speed,position:0,maxPosition:0,maxX:e.maxX,maxY:e.maxY,image:x.monster,monsterAppearOptions:[{x:"random",y:0},{x:"max",y:"random"},{x:"random",y:"max"},{x:0,y:"random"}]};var t=this.monsterData,n=t.monsterAppearOptions[d(4)];return Object.keys(n).forEach(function(e){var o=t["max".concat(e.toUpperCase())];switch(n[e]){case"random":t[e]=d(o);break;case"max":t[e]=o;break;default:t[e]=n[e]}}),t.checkHit=function(e){var n=e.sniper,o=e.life,s=t.speed,a=t.x,r=t.y,i=p(n.x,a),c=p(n.y,r),l=s+o.r+20,h=i<l&&c<l;return h&&(e.life.life-=o.speed),h},t.draw=function(e,n){var o=e.ctx,s=e.sniper,a=t.checkHit,r=t.h,i=t.image,c=t.speed,l=t.position,h=t.px,f=(t.py,t.w),d=t.x,x=t.y,m=c,v=c,y=p(s.x,d),w=p(s.y,x);y>w?v=w/y*c:m=y/w*c,a(e)?"function"==typeof n&&n():(s.x>d?t.x+=m:s.x<d&&(t.x-=m),s.y>x?t.y+=v:s.y<x&&(t.y-=v),o.save(),o.translate(t.x,t.y),h&&o.rotate(Math.atan2(s.y-t.y,s.x-t.x)+Math.PI/2),u(t),o.drawImage(i,l*f,0,f,r,-12,-31,f,r),o.restore())},Object.assign(t,e),t},S=function(e){var t,n=e||{},o=n.drawSceneSpeed,s=n.monsterGenerateInterval,a=n.sceneName;this.sceneName=a||"scene",this.settings={drawSceneSpeed:o||16.66666666,levelUp:30,monsterSpeed:1,monsterGenerateInterval:s||2e3},t=[{code:"explosion",src:"images/explosion.png"},{code:"monster",src:"images/monster.png"},{code:"rocket",src:"images/rocket.png"},{code:"sniper",src:"images/sniper.png"}],Array.isArray(t)||(t=[t]),t.forEach(function(e){try{x[e.code]=new Image,x[e.code].src=e.src}catch(t){console.error("Initialization failed!")}})};S.prototype.getMonsterSpeed=function(){return this.settings.monsterSpeed},S.prototype.render=function(){var e=this,t=this.ctx,n=this.explosions,o=this.level,s=this.life,a=this.monsters,r=this.mouseMoveOffset,i=this.rockets,c=this.score,l=this.sniper,h=this.steps;t.clearRect(0,0,t.canvas.width,t.canvas.height),o.draw(e),c.draw(e),l.draw(e,r),s.draw(e,function(){e.destroy()}),i.forEach(function(t,n){t.draw(e,function(){i.splice(n,1)})}),h.forEach(function(t,n){t.draw(e,function(){h.splice(n,1)})}),n.forEach(function(t,o){t.draw(e,function(){n.splice(o,1)})}),a.forEach(function(t,n){t.draw(e,function(){a.splice(n,1)})})},S.prototype.destroy=function(){var e=this,t=this.ctx,n=this.drawingInterval,o=this.gameover,s=this.level,a=this.monsterInterval,r=this.settings,i=this.score,c=t.canvas,l=c.height,h=c.width;clearInterval(a),clearInterval(n),setTimeout(function(){t.clearRect(0,0,h,l),o.draw(e),s.draw(e),i.draw(e)},r.drawSceneSpeed)},S.prototype.init=function(e,t){var n=this;this.canvas=document.getElementById(this.sceneName),this.ctx=this.canvas.getContext("2d"),this.explosions=[],this.monsters=[],this.rockets=[],this.steps=[],this.gameover=new v,this.level=new m,this.life=new y,this.score=new w,this.sniper=new g,this.mouseMoveOffset={x:0,y:0};var o=this.canvas,s=this.mouseMoveOffset,a=this.rockets,r=this.settings,i=this.sniper,c=this.steps;this.render=this.render.bind(this),o.addEventListener("mousemove",function(e){s.x=e.pageX-e.target.offsetLeft,s.y=e.pageY-e.target.offsetTop}),this.drawingInterval=setInterval(function(){n.render()},r.drawSceneSpeed),this.monsterInterval=setInterval(function(){n.monsters.push(new I({maxX:e,maxY:t,speed:n.getMonsterSpeed()}))},r.monsterGenerateInterval),o.addEventListener("mousedown",function(e){var t=e.which,n=e.offsetX||0,o=e.offsetY||0;switch(t){case 1:a.push(new k({mx:s.x,my:s.y,px:n,py:o,x:i.x,y:i.y}));break;case 3:i.sniperLastMouseX=n,i.sniperLastMouseY=o,i.isMoving=!0,c.push(new M({x:n,y:o}))}})};var D=S,O=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(new D).init(1e3,600)}},{key:"onContextMenu",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){return s.a.createElement("canvas",{id:"scene",width:1e3,height:600,onContextMenu:this.onContextMenu})}}]),t}(o.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.b5e04af4.chunk.js.map