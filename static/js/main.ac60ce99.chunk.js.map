{"version":3,"sources":["core/tools.js","core/gameObjects.js","core/scene.js","App.js","serviceWorker.js","index.js"],"names":["getDiff","x","y","Math","abs","Number","updatePosition","obj","position","maxPosition","images","Sniper","options","this","sniperData","w","h","speed","isMoving","sniperLastMouseX","sniperLastMouseY","image","sniper","draw","ctx","mouseMoveOffset","stepX","stepY","diffX","diffY","save","translate","rotate","atan2","PI","drawImage","lineGrd","createLinearGradient","addColorStop","fillStyle","fillRect","restore","Object","assign","Step","stepData","r","maxR","style","isStarted","width","cb","beginPath","strokeStyle","lineWidth","arc","closePath","stroke","Explosion","explosionData","explosion","p","ceil","Rocket","rocketData","mx","my","px","py","rocket","explosions","push","Scene","elements","_ref","drawSceneSpeed","sceneName","settings","code","src","Array","isArray","forEach","el","Image","e","console","error","prototype","render","rockets","steps","clearRect","canvas","height","rock","i","splice","step","exp","destroy","drawingInterval","_ctx$canvas","clearInterval","init","self","document","getElementById","getContext","gameObjects","bind","$","mousemove","pageX","target","offsetLeft","pageY","offsetTop","setInterval","mousedown","originalEvent","which","mouseX","layerX","mouseY","layerY","App","preventDefault","react_default","a","createElement","id","tabIndex","onContextMenu","PureComponent","Boolean","window","location","hostname","match","ReactDOM","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ac60ce99.chunk.js","sourcesContent":["const getDiff = (x,y) => {\r\n    return Math.abs(Number(x) - Number(y));\r\n};\r\n\r\n// update sprite positions\r\nconst updatePosition = (obj) => {\r\n    obj.position = obj.position === obj.maxPosition ? 0 : ++obj.position;\r\n};\r\n\r\nexport {\r\n    getDiff,\r\n    updatePosition,\r\n}","import { getDiff, updatePosition } from './tools';\r\n\r\nconst images = {};\r\n\r\nconst init = function(elements) {\r\n    if (!(Array.isArray(elements))) {\r\n        elements = [elements];\r\n    }\r\n\r\n    elements.forEach(el => {\r\n        try {\r\n            images[el.code] = new Image();\r\n            images[el.code].src = el.src;\r\n        } catch(e){\r\n            console.error(\"Initialization failed!\");\r\n        }\r\n    });\r\n};\r\n\r\nconst Sniper = function (options) {\r\n    this.sniperData = {\r\n        x\t\t\t\t\t: 400,\r\n        y\t\t\t\t\t: 300,\r\n        w\t\t\t\t\t: 53,\r\n        h\t\t\t\t\t: 63,\r\n        speed\t\t\t\t: 3,\r\n        position\t\t\t: 0,\r\n        maxPosition\t\t\t: 7,\r\n        isMoving\t\t\t: false,\r\n        sniperLastMouseX\t: 0,\r\n        sniperLastMouseY\t: 0,\r\n        image\t\t\t\t: images.sniper,\r\n    };\r\n\r\n    const { sniperData } = this;\r\n\r\n    sniperData.draw = function(ctx, mouseMoveOffset) {\r\n        const { h, image, isMoving, sniperLastMouseX, sniperLastMouseY, speed, w, x, y } = sniperData;\r\n\r\n        let stepX = speed;\r\n        let stepY = speed;\r\n\r\n        const diffX = getDiff(sniperLastMouseX, x);\r\n        const diffY = getDiff(sniperLastMouseY, y);\r\n\r\n        if (diffX > diffY) {\r\n            stepY = diffY / diffX * speed;\r\n        } else {\r\n            stepX = diffX / diffY * speed;\r\n        }\r\n\r\n        if (isMoving && (diffX > speed || diffY > speed)) {\r\n            if (sniperLastMouseX > x) {\r\n                sniperData.x += stepX;\r\n            } else if (sniperLastMouseX < x) {\r\n                sniperData.x -= stepX;\r\n            }\r\n\r\n            if (sniperLastMouseY > y) {\r\n                sniperData.y += stepY;\r\n            } else if (sniperLastMouseY < y) {\r\n                sniperData.y -= stepY;\r\n            }\r\n        } else {\r\n            sniperData.isMoving = false;\r\n        }\r\n\r\n        ctx.save();\r\n        ctx.translate(sniperData.x, sniperData.y);\r\n        updatePosition(sniperData);\r\n\r\n        mouseMoveOffset.x && ctx.rotate(\r\n            Math.atan2(mouseMoveOffset.y - sniperData.y, mouseMoveOffset.x - sniperData.x) + Math.PI/2\r\n        );\r\n        ctx.drawImage(image, isMoving ? sniperData.position * w : 0,  0, w, h, -15, 0, w, h);\r\n        ctx.rotate(-Math.PI/2);\r\n\r\n        const lineGrd = ctx.createLinearGradient(0,0,700,0);\r\n        lineGrd.addColorStop(0,\"#8B1516\");\r\n        lineGrd.addColorStop(1,\"#252729\");\r\n        ctx.fillStyle = lineGrd;\r\n        ctx.fillRect(0,-2,1000,1);\r\n        ctx.restore();\r\n    };\r\n\r\n    //checking custom options\r\n    Object.assign(sniperData, options);\r\n\r\n    return sniperData;\r\n};\r\n\r\nconst Step = function (options) {\r\n    this.stepData = {\r\n        x\t\t    : 0,\r\n        y\t\t    : 0,\r\n        r\t\t    : 5,\r\n        maxR\t    : 18,\r\n        speed\t    : 0.6,\r\n        style\t    : \"#8B1516\",\r\n        isStarted\t: false,\r\n        width\t    : 2,\r\n    };\r\n\r\n    const { stepData } = this;\r\n\r\n    stepData.draw = function(ctx, cb) {\r\n        const { isStarted, maxR, r, speed, style, width, x, y } = stepData;\r\n\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = style;\r\n        ctx.lineWidth = width;\r\n\r\n        if (!isStarted) {\r\n            ctx.arc(x, y, r, 0, 2 * Math.PI);\r\n            stepData.isStarted = true;\r\n        } else {\r\n            ctx.arc(x, y, r, 0, 2 * Math.PI);\r\n            stepData.r += speed;\r\n            if (stepData.r > maxR) {\r\n                if (typeof cb == \"function\") cb();\r\n            }\r\n        }\r\n\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    };\r\n\r\n    //checking custom options\r\n    Object.assign(stepData, options);\r\n\r\n    return stepData;\r\n};\r\n\r\nconst Explosion = function (options) {\r\n    this.explosionData = {\r\n        x\t\t\t: 0,\r\n        y\t\t\t: 0,\r\n        w\t\t\t: 128,\r\n        h\t\t\t: 128,\r\n        position\t: 0,\r\n        image\t\t: images.explosion,\r\n    };\r\n\r\n    const { explosionData } = this;\r\n\r\n    explosionData.draw = function(ctx, cb) {\r\n        const { h, image, position, w, x, y } = explosionData;\r\n\r\n        if (position !== 82) {\r\n            const p = Math.ceil(position / 2);\r\n\r\n            ctx.drawImage(image, p * w,  0, w, h, x - 64, y - 64, w, h);\r\n            explosionData.position++;\r\n        } else {\r\n            if (typeof cb == \"function\") cb();\r\n        }\r\n    };\r\n\r\n    //checking custom options\r\n    Object.assign(explosionData, options);\r\n\r\n    return explosionData;\r\n};\r\n\r\nconst Rocket = function (options) {\r\n    this.rocketData = {\r\n        mx\t\t\t: 0,\r\n        my\t\t\t: 0,\r\n        w\t\t\t: 26,\r\n        h\t\t\t: 49,\r\n        px\t\t\t: 0,\r\n        py\t\t\t: 0,\r\n        x\t\t\t: 0,\r\n        y\t\t\t: 0,\r\n        speed\t\t: 16,\r\n        position\t: 0,\r\n        maxPosition\t: 3,\r\n        image\t\t: images.rocket,\r\n    };\r\n\r\n    const { rocketData } = this;\r\n\r\n    rocketData.draw = function(ctx, explosions, cb) {\r\n        const { h, image, speed, position, px, py, w, x, y } = rocketData;\r\n\r\n        let stepX = speed;\r\n        let stepY = speed;\r\n\r\n        const diffX = getDiff(px, x);\r\n        const diffY = getDiff(py, y);\r\n\r\n        if (diffX > diffY) {\r\n            stepY = diffY / diffX * speed;\r\n        } else {\r\n            stepX = diffX / diffY * speed;\r\n        }\r\n\r\n        if (diffX < speed && diffY < speed) {\r\n            explosions.push(new Explosion({\r\n                x: x,\r\n                y: y\r\n            }));\r\n\r\n            if (typeof cb == \"function\") cb();\r\n\r\n            return;\r\n        }\r\n\r\n        if (px > x) {\r\n            rocketData.x += stepX;\r\n        } else if (px < x) {\r\n            rocketData.x -= stepX;\r\n        }\r\n\r\n        if (py > y) {\r\n            rocketData.y += stepY;\r\n        } else if (py < y) {\r\n            rocketData.y -= stepY;\r\n        }\r\n\r\n        ctx.save();\r\n        ctx.translate(rocketData.x, rocketData.y);\r\n        px && ctx.rotate(Math.atan2(py - rocketData.y, px - rocketData.x) + Math.PI/2);\r\n        updatePosition(rocketData);\r\n        ctx.drawImage(image, position * w,  0, w, h, -12, -31, w, h);\r\n        ctx.restore();\r\n    };\r\n\r\n    //checking custom options\r\n    Object.assign(rocketData, options);\r\n\r\n    return rocketData;\r\n};\r\n\r\nexport {\r\n    Explosion,\r\n    init,\r\n    Rocket,\r\n    Sniper,\r\n    Step,\r\n}","/* global $ */\r\n\r\nimport * as gameObjects from './gameObjects';\r\n\r\nconst Scene = function (options) {\r\n    const { drawSceneSpeed, sceneName, } = options || {};\r\n\r\n    this.sceneName = sceneName || 'scene';\r\n    this.settings = {\r\n        drawSceneSpeed: drawSceneSpeed || 16.66666666,\r\n    };\r\n\r\n\r\n    gameObjects.init([\r\n        { code: \"explosion\", src:  \"images/explosion.png\"},\r\n        { code: \"sniper\", src:  \"images/sniper.png\"},\r\n        { code: \"rocket\", src:  \"images/rocket.png\"}\r\n    ]);\r\n};\r\n\r\nScene.prototype.render = function () {\r\n    const { ctx, explosions, mouseMoveOffset, rockets, sniper, steps, } = this;\r\n\r\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height); // clear canvas\r\n\r\n    sniper.draw(ctx, mouseMoveOffset);\r\n\r\n    // draw rockets\r\n    rockets.forEach((rock, i) => {\r\n        rock.draw(ctx, explosions, () => {\r\n            rockets.splice(i, 1);\r\n        });\r\n    });\r\n\r\n    // draw steps\r\n    steps.forEach((step, i) => {\r\n        step.draw(ctx, () => {\r\n            steps.splice(i, 1);\r\n        });\r\n    });\r\n\r\n    // draw explosions\r\n    explosions.forEach((exp, i) => {\r\n        exp.draw(ctx, () => {\r\n            explosions.splice(i, 1);\r\n        });\r\n    });\r\n};\r\n\r\nScene.prototype.destroy = function() {\r\n    const { ctx, drawingInterval } = this;\r\n    const { height, width } = ctx.canvas;\r\n\r\n    ctx.clearRect(0, 0, width, height);\r\n    clearInterval(drawingInterval);\r\n};\r\n\r\nScene.prototype.init = function() {\r\n    const self = this;\r\n    this.canvas = document.getElementById(this.sceneName);\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    this.rockets = [];\r\n    this.steps = [];\r\n    this.explosions = [];\r\n    this.sniper = new gameObjects.Sniper();\r\n\r\n    this.mouseMoveOffset = { x: 0, y: 0};\r\n\r\n    const { canvas, mouseMoveOffset, rockets, settings, sniper, steps } = this;\r\n\r\n    this.render = this.render.bind(this);\r\n\r\n    $('#scene').mousemove(function(e) {\r\n        mouseMoveOffset.x = e.pageX - e.target.offsetLeft;\r\n        mouseMoveOffset.y =\te.pageY - e.target.offsetTop;\r\n    });\r\n\r\n    this.drawingInterval = setInterval(function() {\r\n\r\n        //draw the scene\r\n        self.render();\r\n    }, settings.drawSceneSpeed);\r\n\r\n    $(canvas).mousedown(function(e){\r\n        const { originalEvent, which } = e;\r\n\r\n        let mouseX = e.layerX || 0;\r\n        let mouseY = e.layerY || 0;\r\n\r\n        if(originalEvent.layerX) {\r\n            mouseX = originalEvent.layerX;\r\n            mouseY = originalEvent.layerY;\r\n        }\r\n\r\n        switch (which) {\r\n            case 1: // left button\r\n\r\n                //add a rocket\r\n                rockets.push(new gameObjects.Rocket({\r\n                    mx \t\t: mouseMoveOffset.x,\r\n                    my  \t: mouseMoveOffset.y,\r\n                    px \t\t: mouseX,\r\n                    py\t\t: mouseY,\r\n                    x\t\t: sniper.x,\r\n                    y\t\t: sniper.y\r\n                }));\r\n\r\n                break;\r\n\r\n            case 3: // right button\r\n\r\n                // saving last coordinates and move the sniper\r\n                sniper.sniperLastMouseX = mouseX;\r\n                sniper.sniperLastMouseY = mouseY;\r\n                sniper.isMoving = true;\r\n\r\n                //add a step\r\n                steps.push(new gameObjects.Step({\r\n                    x: mouseX,\r\n                    y: mouseY\r\n                }));\r\n\r\n                break;\r\n        }\r\n    });\r\n};\r\n\r\nexport default Scene;","import React, { PureComponent } from 'react';\n\nimport Scene from './core/scene';\n\nclass App extends PureComponent {\n  componentDidMount() {\n    (new Scene()).init();\n  }\n\n  onContextMenu(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  render() {\n    return (\n        <canvas id=\"scene\" width=\"1000\" height=\"600\" tabIndex=\"1\" onContextMenu={this.onContextMenu}></canvas>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}