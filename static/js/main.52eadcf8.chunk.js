(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(2),s=n.n(r),i=(n(14),n(3)),c=n(4),l=n(6),h=n(5),f=n(7),p=function(e,t){return Math.abs(Number(e)-Number(t))},d=function(e){return Math.floor(Math.random()*e)},u=function(e){e.position=e.position===e.maxPosition?0:++e.position},x={},m=function(e){this.levelData={color:"#fff",font:"30px Arial",label:"Level:",level:1,x:850,y:30};var t=this.levelData;return t.draw=function(e){var n=t.color,a=t.font,o=t.label,r=t.level,s=t.x,i=t.y,c=e.ctx,l="".concat(o," ").concat(r);c.fillStyle=n,c.font=a,c.fillText(l,s,i)},Object.assign(t,e),t},y=function(e){this.gameData={color:"#fff",font:"45px Arial",label:"Game Over",x:385,y:300};var t=this.gameData;return t.draw=function(e){var n=t.color,a=t.font,o=t.label,r=t.x,s=t.y,i=e.ctx;i.fillStyle=n,i.font=a,i.fillText(o,r,s)},Object.assign(t,e),t},v=function(e){this.lifeData={colors:{baseColor:"#DCDCDC",dangerColor:"#FF0000",fullColor:"#00FF00",middleColor:"#FFFF00"},life:100,r:65,speed:10,width:5};var t=this.lifeData;return t.draw=function(e,n){var a,o=e.ctx,r=e.sniper,s=r.x,i=r.y,c=t.life,l=t.r,h=t.colors,f=t.width;a=c<=30?h.dangerColor:c<=70?h.middleColor:h.fullColor,o.beginPath(),o.lineWidth=f,o.strokeStyle=a,o.arc(s,i,l,Math.PI/180*-90,Math.PI/180*270,!0),o.closePath(),o.stroke(),o.beginPath(),o.lineWidth=f,o.strokeStyle=h.baseColor,o.arc(s,i,l,Math.PI/180*-90,Math.PI/180*(3.6*(100-c)-90)),o.stroke(),o.closePath(),t.life<=0&&"function"==typeof n&&n()},Object.assign(t,e),t},w=function(e){this.scoreData={color:"#fff",font:"30px Arial",label:"Score:",score:0,x:20,y:30};var t=this.scoreData;return t.draw=function(e){var n=t.color,a=t.font,o=t.label,r=t.score,s=t.x,i=t.y,c=e.ctx,l="".concat(o," ").concat(r);c.fillStyle=n,c.font=a,c.fillText(l,s,i)},Object.assign(t,e),t},g=function(e){this.sniperData={x:400,y:300,w:53,h:63,speed:3,position:0,maxPosition:7,isMoving:!1,sniperLastMouseX:0,sniperLastMouseY:0,image:x.sniper};var t=this.sniperData;return t.draw=function(e,n){var a=e.ctx,o=t.h,r=t.image,s=t.isMoving,i=t.sniperLastMouseX,c=t.sniperLastMouseY,l=t.speed,h=t.w,f=t.x,d=t.y,x=l,m=l,y=p(i,f),v=p(c,d);y>v?m=v/y*l:x=y/v*l,s&&(y>l||v>l)?(i>f?t.x+=x:i<f&&(t.x-=x),c>d?t.y+=m:c<d&&(t.y-=m)):t.isMoving=!1,a.save(),a.translate(t.x,t.y),u(t),n.x&&a.rotate(Math.atan2(n.y-t.y,n.x-t.x)+Math.PI/2),a.drawImage(r,s?t.position*h:0,0,h,o,-15,0,h,o),a.rotate(-Math.PI/2);var w=a.createLinearGradient(0,0,700,0);w.addColorStop(0,"#8B1516"),w.addColorStop(1,"#252729"),a.fillStyle=w,a.fillRect(0,-2,1e3,1),a.restore()},Object.assign(t,e),t},M=function(e){this.stepData={x:0,y:0,r:5,maxR:18,speed:.6,style:"#8B1516",isStarted:!1,width:2};var t=this.stepData;return t.draw=function(e,n){var a=e.ctx,o=t.isStarted,r=t.maxR,s=t.r,i=t.speed,c=t.style,l=t.width,h=t.x,f=t.y;a.beginPath(),a.strokeStyle=c,a.lineWidth=l,o?(a.arc(h,f,s,0,2*Math.PI),t.r+=i,t.r>r&&"function"==typeof n&&n()):(a.arc(h,f,s,0,2*Math.PI),t.isStarted=!0),a.closePath(),a.stroke()},Object.assign(t,e),t},b=function(e){this.explosionData={x:0,y:0,w:128,h:128,position:0,image:x.explosion};var t=this.explosionData;return t.draw=function(e,n){var a=e.ctx,o=t.h,r=t.image,s=t.position,i=t.w,c=t.x,l=t.y;if(82!==s){var h=Math.ceil(s/2);a.drawImage(r,h*i,0,i,o,c-64,l-64,i,o),t.position++}else"function"==typeof n&&n()},Object.assign(t,e),t},k=function(e){this.rocketData={mx:0,my:0,w:26,h:49,px:0,py:0,x:0,y:0,speed:16,position:0,maxPosition:3,image:x.rocket};var t=this.rocketData;return t.checkTargets=function(e){var n=t.x,a=t.y,o=e.monsters,r=o.length;e.monsters=o.filter(function(e){var t=p(e.x,n),o=p(e.y,a);return!(t<20&&o<20)});var s=r!==e.monsters.length;return s&&(e.score.score++,e.score.score===e.settings.levelUp&&(e.score.score=0,e.level.level++,e.settings.monsterSpeed+=1)),s},t.draw=function(e,n){var a=e.explosions,o=e.ctx,r=t.checkTargets,s=t.h,i=t.image,c=t.speed,l=t.position,h=t.px,f=t.py,d=t.w,x=t.x,m=t.y,y=r(e),v=c,w=c,g=p(h,x),M=p(f,m);if(g>M?w=M/g*c:v=g/M*c,y||g<c&&M<c)return a.push(new b({x:x,y:m})),void("function"==typeof n&&n());h>x?t.x+=v:h<x&&(t.x-=v),f>m?t.y+=w:f<m&&(t.y-=w),o.save(),o.translate(t.x,t.y),h&&o.rotate(Math.atan2(f-t.y,h-t.x)+Math.PI/2),u(t),o.drawImage(i,l*d,0,d,s,-12,-31,d,s),o.restore()},Object.assign(t,e),t},I=function(e){this.monsterData={w:42,h:31,speed:e.speed,position:0,maxPosition:0,maxX:e.maxX,maxY:e.maxY,image:x.monster,monsterAppearOptions:[{x:"random",y:0},{x:"max",y:"random"},{x:"random",y:"max"},{x:0,y:"random"}]};var t=this.monsterData,n=t.monsterAppearOptions[d(4)];return Object.keys(n).forEach(function(e){var a=t["max".concat(e.toUpperCase())];switch(n[e]){case"random":t[e]=d(a);break;case"max":t[e]=a;break;default:t[e]=n[e]}}),t.checkHit=function(e){var n=e.sniper,a=e.life,o=t.speed,r=t.x,s=t.y,i=p(n.x,r),c=p(n.y,s),l=o+a.r+20,h=i<l&&c<l;return h&&(e.life.life-=a.speed),h},t.draw=function(e,n){var a=e.ctx,o=e.sniper,r=t.checkHit,s=t.h,i=t.image,c=t.speed,l=t.position,h=t.px,f=(t.py,t.w),d=t.x,x=t.y,m=c,y=c,v=p(o.x,d),w=p(o.y,x);v>w?y=w/v*c:m=v/w*c,r(e)?"function"==typeof n&&n():(o.x>d?t.x+=m:o.x<d&&(t.x-=m),o.y>x?t.y+=y:o.y<x&&(t.y-=y),a.save(),a.translate(t.x,t.y),h&&a.rotate(Math.atan2(o.y-t.y,o.x-t.x)+Math.PI/2),u(t),a.drawImage(i,l*f,0,f,s,-12,-31,f,s),a.restore())},Object.assign(t,e),t},S=function(e){var t,n=e||{},a=n.drawSceneSpeed,o=n.monsterGenerateInterval,r=n.sceneName;this.sceneName=r||"scene",this.settings={drawSceneSpeed:a||16.66666666,levelUp:30,monsterSpeed:1,monsterGenerateInterval:o||2e3},t=[{code:"explosion",src:"images/explosion.png"},{code:"monster",src:"images/monster.png"},{code:"rocket",src:"images/rocket.png"},{code:"sniper",src:"images/sniper.png"}],Array.isArray(t)||(t=[t]),t.forEach(function(e){try{x[e.code]=new Image,x[e.code].src=e.src}catch(t){console.error("Initialization failed!")}})};S.prototype.getMonsterSpeed=function(){return this.settings.monsterSpeed},S.prototype.render=function(){var e=this,t=this.ctx,n=this.explosions,a=this.level,o=this.life,r=this.monsters,s=this.mouseMoveOffset,i=this.rockets,c=this.score,l=this.sniper,h=this.steps;t.clearRect(0,0,t.canvas.width,t.canvas.height),a.draw(e),c.draw(e),l.draw(e,s),o.draw(e,function(){e.destroy()}),i.forEach(function(t,n){t.draw(e,function(){i.splice(n,1)})}),h.forEach(function(t,n){t.draw(e,function(){h.splice(n,1)})}),n.forEach(function(t,a){t.draw(e,function(){n.splice(a,1)})}),r.forEach(function(t,n){t.draw(e,function(){r.splice(n,1)})})},S.prototype.destroy=function(){var e=this,t=this.ctx,n=this.drawingInterval,a=this.gameover,o=this.level,r=this.monsterInterval,s=this.settings,i=this.score,c=t.canvas,l=c.height,h=c.width;clearInterval(r),clearInterval(n),setTimeout(function(){t.clearRect(0,0,h,l),a.draw(e),o.draw(e),i.draw(e)},s.drawSceneSpeed)},S.prototype.init=function(e,t){var n=this;this.canvas=document.getElementById(this.sceneName),this.ctx=this.canvas.getContext("2d"),this.explosions=[],this.monsters=[],this.rockets=[],this.steps=[],this.gameover=new y,this.level=new m,this.life=new v,this.score=new w,this.sniper=new g,this.mouseMoveOffset={x:0,y:0};var a=this.canvas,o=this.mouseMoveOffset,r=this.rockets,s=this.settings,i=this.sniper,c=this.steps;this.render=this.render.bind(this),a.addEventListener("mousemove",function(e){o.x=e.pageX-e.target.offsetLeft,o.y=e.pageY-e.target.offsetTop}),this.drawingInterval=setInterval(function(){n.render()},s.drawSceneSpeed),this.monsterInterval=setInterval(function(){n.monsters.push(new I({maxX:e,maxY:t,speed:n.getMonsterSpeed()}))},s.monsterGenerateInterval),a.addEventListener("mousedown",function(e){var t=e.originalEvent,n=e.which,a=e.layerX||0,s=e.layerY||0;switch(t&&t.layerX&&(a=t.layerX,s=t.layerY),n){case 1:r.push(new k({mx:o.x,my:o.y,px:a,py:s,x:i.x,y:i.y}));break;case 3:i.sniperLastMouseX=a,i.sniperLastMouseY=s,i.isMoving=!0,c.push(new M({x:a,y:s}))}})};var D=S,O=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(new D).init(1e3,600)}},{key:"onContextMenu",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){return o.a.createElement("canvas",{id:"scene",width:1e3,height:600,onContextMenu:this.onContextMenu})}}]),t}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.52eadcf8.chunk.js.map