(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(2),o=n.n(i),r=(n(14),n(3)),c=n(4),h=n(6),p=n(5),u=n(7),m=function(e,t){return Math.abs(Number(e)-Number(t))},d=function(e){return Math.floor(Math.random()*e)},x=function(e){e.position=e.position===e.maxPosition?0:++e.position},f={},l=function(e){this.sniperData={x:400,y:300,w:53,h:63,speed:3,position:0,maxPosition:7,isMoving:!1,sniperLastMouseX:0,sniperLastMouseY:0,image:f.sniper};var t=this.sniperData;return t.draw=function(e,n){var a=e.ctx,s=t.h,i=t.image,o=t.isMoving,r=t.sniperLastMouseX,c=t.sniperLastMouseY,h=t.speed,p=t.w,u=t.x,d=t.y,f=h,l=h,y=m(r,u),v=m(c,d);y>v?l=v/y*h:f=y/v*h,o&&(y>h||v>h)?(r>u?t.x+=f:r<u&&(t.x-=f),c>d?t.y+=l:c<d&&(t.y-=l)):t.isMoving=!1,a.save(),a.translate(t.x,t.y),x(t),n.x&&a.rotate(Math.atan2(n.y-t.y,n.x-t.x)+Math.PI/2),a.drawImage(i,o?t.position*p:0,0,p,s,-15,0,p,s),a.rotate(-Math.PI/2);var w=a.createLinearGradient(0,0,700,0);w.addColorStop(0,"#8B1516"),w.addColorStop(1,"#252729"),a.fillStyle=w,a.fillRect(0,-2,1e3,1),a.restore()},Object.assign(t,e),t},y=function(e){this.stepData={x:0,y:0,r:5,maxR:18,speed:.6,style:"#8B1516",isStarted:!1,width:2};var t=this.stepData;return t.draw=function(e,n){var a=e.ctx,s=t.isStarted,i=t.maxR,o=t.r,r=t.speed,c=t.style,h=t.width,p=t.x,u=t.y;a.beginPath(),a.strokeStyle=c,a.lineWidth=h,s?(a.arc(p,u,o,0,2*Math.PI),t.r+=r,t.r>i&&"function"==typeof n&&n()):(a.arc(p,u,o,0,2*Math.PI),t.isStarted=!0),a.closePath(),a.stroke()},Object.assign(t,e),t},v=function(e){this.explosionData={x:0,y:0,w:128,h:128,position:0,image:f.explosion};var t=this.explosionData;return t.draw=function(e,n){var a=e.ctx,s=t.h,i=t.image,o=t.position,r=t.w,c=t.x,h=t.y;if(82!==o){var p=Math.ceil(o/2);a.drawImage(i,p*r,0,r,s,c-64,h-64,r,s),t.position++}else"function"==typeof n&&n()},Object.assign(t,e),t},w=function(e){this.rocketData={mx:0,my:0,w:26,h:49,px:0,py:0,x:0,y:0,speed:16,position:0,maxPosition:3,image:f.rocket};var t=this.rocketData;return t.checkTargets=function(e){var n=t.x,a=t.y,s=e.monsters,i=s.length;return e.monsters=s.filter(function(e){var t=m(e.x,n),s=m(e.y,a);return!(t<20&&s<20)}),i!==e.monsters.length},t.draw=function(e,n){var a=e.explosions,s=e.ctx,i=t.checkTargets,o=t.h,r=t.image,c=t.speed,h=t.position,p=t.px,u=t.py,d=t.w,f=t.x,l=t.y,y=i(e),w=c,g=c,M=m(p,f),I=m(u,l);if(M>I?g=I/M*c:w=M/I*c,y||M<c&&I<c)return a.push(new v({x:f,y:l})),void("function"==typeof n&&n());p>f?t.x+=w:p<f&&(t.x-=w),u>l?t.y+=g:u<l&&(t.y-=g),s.save(),s.translate(t.x,t.y),p&&s.rotate(Math.atan2(u-t.y,p-t.x)+Math.PI/2),x(t),s.drawImage(r,h*d,0,d,o,-12,-31,d,o),s.restore()},Object.assign(t,e),t},g=function(e){this.monsterData={mx:0,my:0,w:42,h:31,px:0,py:0,speed:1,position:0,maxPosition:0,maxX:e.maxX,maxY:e.maxY,image:f.monster,monsterAppearOptions:[{x:"random",y:0},{x:"max",y:"random"},{x:"random",y:"max"},{x:0,y:"random"}]};var t=this.monsterData,n=t.monsterAppearOptions[d(4)];return Object.keys(n).forEach(function(e){var a=t["max".concat(e.toUpperCase())];switch(n[e]){case"random":t[e]=d(a);break;case"max":t[e]=a;break;default:t[e]=n[e]}}),t.draw=function(e,n){var a=e.ctx,s=t.h,i=t.image,o=t.speed,r=t.position,c=t.px,h=t.py,p=t.w,u=t.x,d=t.y,f=o,l=o,y=m(c,u),v=m(h,d);y>v?l=v/y*o:f=y/v*o,y<o&&v<o?"function"==typeof n&&n():(c>u?t.x+=f:c<u&&(t.x-=f),h>d?t.y+=l:h<d&&(t.y-=l),a.save(),a.translate(t.x,t.y),c&&a.rotate(Math.atan2(h-t.y,c-t.x)+Math.PI/2),x(t),a.drawImage(i,r*p,0,p,s,-12,-31,p,s),a.restore())},Object.assign(t,e),t},M=function(e){var t,n=e||{},a=n.drawSceneSpeed,s=n.monsterGenerateInterval,i=n.sceneName;this.sceneName=i||"scene",this.settings={drawSceneSpeed:a||16.66666666,monsterGenerateInterval:s||2e3},t=[{code:"explosion",src:"images/explosion.png"},{code:"monster",src:"images/monster.png"},{code:"rocket",src:"images/rocket.png"},{code:"sniper",src:"images/sniper.png"}],Array.isArray(t)||(t=[t]),t.forEach(function(e){try{f[e.code]=new Image,f[e.code].src=e.src}catch(t){console.error("Initialization failed!")}})};M.prototype.render=function(){var e=this,t=this.ctx,n=this.explosions,a=this.monsters,s=this.mouseMoveOffset,i=this.rockets,o=this.sniper,r=this.steps;t.clearRect(0,0,t.canvas.width,t.canvas.height),o.draw(e,s),i.forEach(function(t,n){t.draw(e,function(){i.splice(n,1)})}),r.forEach(function(t,n){t.draw(e,function(){r.splice(n,1)})}),n.forEach(function(t,a){t.draw(e,function(){n.splice(a,1)})}),a.forEach(function(t,n){t.draw(e,function(){a.splice(n,1)})})},M.prototype.destroy=function(){var e=this.ctx,t=this.drawingInterval,n=this.monsterInterval,a=e.canvas,s=a.height,i=a.width;e.clearRect(0,0,i,s),clearInterval(n),clearInterval(t)},M.prototype.init=function(e,t){var n=this;this.canvas=document.getElementById(this.sceneName),this.ctx=this.canvas.getContext("2d"),this.explosions=[],this.monsters=[],this.rockets=[],this.steps=[],this.sniper=new l,this.mouseMoveOffset={x:0,y:0};var a=this.canvas,s=this.mouseMoveOffset,i=this.rockets,o=this.settings,r=this.sniper,c=this.steps;this.render=this.render.bind(this),a.addEventListener("mousemove",function(e){s.x=e.pageX-e.target.offsetLeft,s.y=e.pageY-e.target.offsetTop}),this.drawingInterval=setInterval(function(){n.render()},o.drawSceneSpeed),this.monsterInterval=setInterval(function(){n.monsters.push(new g({px:r.x,py:r.y,mx:s.x,my:s.y,maxX:e,maxY:t}))},o.monsterGenerateInterval),a.addEventListener("mousedown",function(e){var t=e.originalEvent,n=e.which,a=e.layerX||0,o=e.layerY||0;switch(t&&t.layerX&&(a=t.layerX,o=t.layerY),n){case 1:i.push(new w({mx:s.x,my:s.y,px:a,py:o,x:r.x,y:r.y}));break;case 3:r.sniperLastMouseX=a,r.sniperLastMouseY=o,r.isMoving=!0,c.push(new y({x:a,y:o}))}})};var I=M,k=function(e){function t(){return Object(r.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(new I).init(1e3,600)}},{key:"onContextMenu",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){return s.a.createElement("canvas",{id:"scene",width:1e3,height:600,onContextMenu:this.onContextMenu})}}]),t}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.235d521a.chunk.js.map