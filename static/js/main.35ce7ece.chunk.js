(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(2),s=n.n(r),i=(n(14),n(3)),c=n(4),h=n(6),l=n(5),p=n(7),f=function(e,t){return Math.abs(Number(e)-Number(t))},u=function(e){return Math.floor(Math.random()*e)},d=function(e){e.position=e.position===e.maxPosition?0:++e.position},x={},m=function(e){this.gameData={color:"#fff",font:"45px Arial",label:"Game Over",x:385,y:300};var t=this.gameData;return t.draw=function(e){var n=t.color,a=t.font,o=t.label,r=t.x,s=t.y,i=e.ctx;i.fillStyle=n,i.font=a,i.fillText(o,r,s)},Object.assign(t,e),t},y=function(e){this.lifeData={colors:{baseColor:"#DCDCDC",dangerColor:"#FF0000",fullColor:"#00FF00",middleColor:"#FFFF00"},life:100,r:65,speed:10,width:5};var t=this.lifeData;return t.draw=function(e,n){var a,o=e.ctx,r=e.sniper,s=r.x,i=r.y,c=t.life,h=t.r,l=t.colors,p=t.width;a=c<=30?l.dangerColor:c<=70?l.middleColor:l.fullColor,o.beginPath(),o.lineWidth=p,o.strokeStyle=a,o.arc(s,i,h,Math.PI/180*-90,Math.PI/180*270,!0),o.closePath(),o.stroke(),o.beginPath(),o.lineWidth=p,o.strokeStyle=l.baseColor,o.arc(s,i,h,Math.PI/180*-90,Math.PI/180*(3.6*(100-c)-90)),o.stroke(),o.closePath(),t.life<=0&&"function"==typeof n&&n()},Object.assign(t,e),t},v=function(e){this.scoreData={color:"#fff",font:"30px Arial",label:"Score:",score:0,x:20,y:30};var t=this.scoreData;return t.draw=function(e){var n=t.color,a=t.font,o=t.label,r=t.score,s=t.x,i=t.y,c=e.ctx,h="".concat(o," ").concat(r);c.fillStyle=n,c.font=a,c.fillText(h,s,i)},Object.assign(t,e),t},w=function(e){this.sniperData={x:400,y:300,w:53,h:63,speed:3,position:0,maxPosition:7,isMoving:!1,sniperLastMouseX:0,sniperLastMouseY:0,image:x.sniper};var t=this.sniperData;return t.draw=function(e,n){var a=e.ctx,o=t.h,r=t.image,s=t.isMoving,i=t.sniperLastMouseX,c=t.sniperLastMouseY,h=t.speed,l=t.w,p=t.x,u=t.y,x=h,m=h,y=f(i,p),v=f(c,u);y>v?m=v/y*h:x=y/v*h,s&&(y>h||v>h)?(i>p?t.x+=x:i<p&&(t.x-=x),c>u?t.y+=m:c<u&&(t.y-=m)):t.isMoving=!1,a.save(),a.translate(t.x,t.y),d(t),n.x&&a.rotate(Math.atan2(n.y-t.y,n.x-t.x)+Math.PI/2),a.drawImage(r,s?t.position*l:0,0,l,o,-15,0,l,o),a.rotate(-Math.PI/2);var w=a.createLinearGradient(0,0,700,0);w.addColorStop(0,"#8B1516"),w.addColorStop(1,"#252729"),a.fillStyle=w,a.fillRect(0,-2,1e3,1),a.restore()},Object.assign(t,e),t},g=function(e){this.stepData={x:0,y:0,r:5,maxR:18,speed:.6,style:"#8B1516",isStarted:!1,width:2};var t=this.stepData;return t.draw=function(e,n){var a=e.ctx,o=t.isStarted,r=t.maxR,s=t.r,i=t.speed,c=t.style,h=t.width,l=t.x,p=t.y;a.beginPath(),a.strokeStyle=c,a.lineWidth=h,o?(a.arc(l,p,s,0,2*Math.PI),t.r+=i,t.r>r&&"function"==typeof n&&n()):(a.arc(l,p,s,0,2*Math.PI),t.isStarted=!0),a.closePath(),a.stroke()},Object.assign(t,e),t},M=function(e){this.explosionData={x:0,y:0,w:128,h:128,position:0,image:x.explosion};var t=this.explosionData;return t.draw=function(e,n){var a=e.ctx,o=t.h,r=t.image,s=t.position,i=t.w,c=t.x,h=t.y;if(82!==s){var l=Math.ceil(s/2);a.drawImage(r,l*i,0,i,o,c-64,h-64,i,o),t.position++}else"function"==typeof n&&n()},Object.assign(t,e),t},b=function(e){this.rocketData={mx:0,my:0,w:26,h:49,px:0,py:0,x:0,y:0,speed:16,position:0,maxPosition:3,image:x.rocket};var t=this.rocketData;return t.checkTargets=function(e){var n=t.x,a=t.y,o=e.monsters,r=o.length;e.monsters=o.filter(function(e){var t=f(e.x,n),o=f(e.y,a);return!(t<20&&o<20)});var s=r!==e.monsters.length;return s&&e.score.score++,s},t.draw=function(e,n){var a=e.explosions,o=e.ctx,r=t.checkTargets,s=t.h,i=t.image,c=t.speed,h=t.position,l=t.px,p=t.py,u=t.w,x=t.x,m=t.y,y=r(e),v=c,w=c,g=f(l,x),b=f(p,m);if(g>b?w=b/g*c:v=g/b*c,y||g<c&&b<c)return a.push(new M({x:x,y:m})),void("function"==typeof n&&n());l>x?t.x+=v:l<x&&(t.x-=v),p>m?t.y+=w:p<m&&(t.y-=w),o.save(),o.translate(t.x,t.y),l&&o.rotate(Math.atan2(p-t.y,l-t.x)+Math.PI/2),d(t),o.drawImage(i,h*u,0,u,s,-12,-31,u,s),o.restore()},Object.assign(t,e),t},k=function(e){this.monsterData={mx:0,my:0,w:42,h:31,px:0,py:0,speed:1,position:0,maxPosition:0,maxX:e.maxX,maxY:e.maxY,image:x.monster,monsterAppearOptions:[{x:"random",y:0},{x:"max",y:"random"},{x:"random",y:"max"},{x:0,y:"random"}]};var t=this.monsterData,n=t.monsterAppearOptions[u(4)];return Object.keys(n).forEach(function(e){var a=t["max".concat(e.toUpperCase())];switch(n[e]){case"random":t[e]=u(a);break;case"max":t[e]=a;break;default:t[e]=n[e]}}),t.checkHit=function(e){var n=e.sniper,a=e.life,o=t.speed,r=t.x,s=t.y,i=f(n.x,r),c=f(n.y,s),h=o+a.r+20,l=i<h&&c<h;return l&&(e.life.life-=a.speed),l},t.draw=function(e,n){var a=e.ctx,o=t.checkHit,r=t.h,s=t.image,i=t.speed,c=t.position,h=t.px,l=t.py,p=t.w,u=t.x,x=t.y,m=i,y=i,v=f(h,u),w=f(l,x);v>w?y=w/v*i:m=v/w*i,o(e)?"function"==typeof n&&n():(h>u?t.x+=m:h<u&&(t.x-=m),l>x?t.y+=y:l<x&&(t.y-=y),a.save(),a.translate(t.x,t.y),h&&a.rotate(Math.atan2(l-t.y,h-t.x)+Math.PI/2),d(t),a.drawImage(s,c*p,0,p,r,-12,-31,p,r),a.restore())},Object.assign(t,e),t},I=function(e){var t,n=e||{},a=n.drawSceneSpeed,o=n.monsterGenerateInterval,r=n.sceneName;this.sceneName=r||"scene",this.settings={drawSceneSpeed:a||16.66666666,monsterGenerateInterval:o||2e3},t=[{code:"explosion",src:"images/explosion.png"},{code:"monster",src:"images/monster.png"},{code:"rocket",src:"images/rocket.png"},{code:"sniper",src:"images/sniper.png"}],Array.isArray(t)||(t=[t]),t.forEach(function(e){try{x[e.code]=new Image,x[e.code].src=e.src}catch(t){console.error("Initialization failed!")}})};I.prototype.render=function(){var e=this,t=this.ctx,n=this.explosions,a=this.life,o=this.monsters,r=this.mouseMoveOffset,s=this.rockets,i=this.score,c=this.sniper,h=this.steps;t.clearRect(0,0,t.canvas.width,t.canvas.height),i.draw(e),c.draw(e,r),a.draw(e,function(){e.destroy()}),s.forEach(function(t,n){t.draw(e,function(){s.splice(n,1)})}),h.forEach(function(t,n){t.draw(e,function(){h.splice(n,1)})}),n.forEach(function(t,a){t.draw(e,function(){n.splice(a,1)})}),o.forEach(function(t,n){t.draw(e,function(){o.splice(n,1)})})},I.prototype.destroy=function(){var e=this,t=this.ctx,n=this.drawingInterval,a=this.gameover,o=this.monsterInterval,r=this.settings,s=this.score,i=t.canvas,c=i.height,h=i.width;clearInterval(o),clearInterval(n),setTimeout(function(){t.clearRect(0,0,h,c),s.draw(e),a.draw(e)},r.drawSceneSpeed)},I.prototype.init=function(e,t){var n=this;this.canvas=document.getElementById(this.sceneName),this.ctx=this.canvas.getContext("2d"),this.explosions=[],this.monsters=[],this.rockets=[],this.steps=[],this.gameover=new m,this.life=new y,this.score=new v,this.sniper=new w,this.mouseMoveOffset={x:0,y:0};var a=this.canvas,o=this.mouseMoveOffset,r=this.rockets,s=this.settings,i=this.sniper,c=this.steps;this.render=this.render.bind(this),a.addEventListener("mousemove",function(e){o.x=e.pageX-e.target.offsetLeft,o.y=e.pageY-e.target.offsetTop}),this.drawingInterval=setInterval(function(){n.render()},s.drawSceneSpeed),this.monsterInterval=setInterval(function(){n.monsters.push(new k({px:i.x,py:i.y,mx:o.x,my:o.y,maxX:e,maxY:t}))},s.monsterGenerateInterval),a.addEventListener("mousedown",function(e){var t=e.originalEvent,n=e.which,a=e.layerX||0,s=e.layerY||0;switch(t&&t.layerX&&(a=t.layerX,s=t.layerY),n){case 1:r.push(new b({mx:o.x,my:o.y,px:a,py:s,x:i.x,y:i.y}));break;case 3:i.sniperLastMouseX=a,i.sniperLastMouseY=s,i.isMoving=!0,c.push(new g({x:a,y:s}))}})};var D=I,P=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(new D).init(1e3,600)}},{key:"onContextMenu",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){return o.a.createElement("canvas",{id:"scene",width:1e3,height:600,onContextMenu:this.onContextMenu})}}]),t}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.35ce7ece.chunk.js.map