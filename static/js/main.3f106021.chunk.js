(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(2),r=n.n(o),i=(n(14),n(3)),c=n(4),h=n(6),p=n(5),u=n(7),x=function(e,t){return Math.abs(Number(e)-Number(t))},m=function(e){return Math.floor(Math.random()*e)},d=function(e){e.position=e.position===e.maxPosition?0:++e.position},l={},f=function(e){this.scoreData={color:"#fff",font:"30px Arial",label:"Score:",score:0,x:20,y:20};var t=this.scoreData;return t.draw=function(e){var n=t.color,a=t.font,s=t.label,o=t.score,r=t.x,i=t.y,c=e.ctx,h="".concat(s," ").concat(o);c.fillStyle=n,c.font=a,c.fillText(h,r,i)},Object.assign(t,e),t},y=function(e){this.sniperData={x:400,y:300,w:53,h:63,speed:3,position:0,maxPosition:7,isMoving:!1,sniperLastMouseX:0,sniperLastMouseY:0,image:l.sniper};var t=this.sniperData;return t.draw=function(e,n){var a=e.ctx,s=t.h,o=t.image,r=t.isMoving,i=t.sniperLastMouseX,c=t.sniperLastMouseY,h=t.speed,p=t.w,u=t.x,m=t.y,l=h,f=h,y=x(i,u),v=x(c,m);y>v?f=v/y*h:l=y/v*h,r&&(y>h||v>h)?(i>u?t.x+=l:i<u&&(t.x-=l),c>m?t.y+=f:c<m&&(t.y-=f)):t.isMoving=!1,a.save(),a.translate(t.x,t.y),d(t),n.x&&a.rotate(Math.atan2(n.y-t.y,n.x-t.x)+Math.PI/2),a.drawImage(o,r?t.position*p:0,0,p,s,-15,0,p,s),a.rotate(-Math.PI/2);var w=a.createLinearGradient(0,0,700,0);w.addColorStop(0,"#8B1516"),w.addColorStop(1,"#252729"),a.fillStyle=w,a.fillRect(0,-2,1e3,1),a.restore()},Object.assign(t,e),t},v=function(e){this.stepData={x:0,y:0,r:5,maxR:18,speed:.6,style:"#8B1516",isStarted:!1,width:2};var t=this.stepData;return t.draw=function(e,n){var a=e.ctx,s=t.isStarted,o=t.maxR,r=t.r,i=t.speed,c=t.style,h=t.width,p=t.x,u=t.y;a.beginPath(),a.strokeStyle=c,a.lineWidth=h,s?(a.arc(p,u,r,0,2*Math.PI),t.r+=i,t.r>o&&"function"==typeof n&&n()):(a.arc(p,u,r,0,2*Math.PI),t.isStarted=!0),a.closePath(),a.stroke()},Object.assign(t,e),t},w=function(e){this.explosionData={x:0,y:0,w:128,h:128,position:0,image:l.explosion};var t=this.explosionData;return t.draw=function(e,n){var a=e.ctx,s=t.h,o=t.image,r=t.position,i=t.w,c=t.x,h=t.y;if(82!==r){var p=Math.ceil(r/2);a.drawImage(o,p*i,0,i,s,c-64,h-64,i,s),t.position++}else"function"==typeof n&&n()},Object.assign(t,e),t},g=function(e){this.rocketData={mx:0,my:0,w:26,h:49,px:0,py:0,x:0,y:0,speed:16,position:0,maxPosition:3,image:l.rocket};var t=this.rocketData;return t.checkTargets=function(e){var n=t.x,a=t.y,s=e.monsters,o=s.length;e.monsters=s.filter(function(e){var t=x(e.x,n),s=x(e.y,a);return!(t<20&&s<20)});var r=o!==e.monsters.length;return r&&e.score.score++,r},t.draw=function(e,n){var a=e.explosions,s=e.ctx,o=t.checkTargets,r=t.h,i=t.image,c=t.speed,h=t.position,p=t.px,u=t.py,m=t.w,l=t.x,f=t.y,y=o(e),v=c,g=c,M=x(p,l),I=x(u,f);if(M>I?g=I/M*c:v=M/I*c,y||M<c&&I<c)return a.push(new w({x:l,y:f})),void("function"==typeof n&&n());p>l?t.x+=v:p<l&&(t.x-=v),u>f?t.y+=g:u<f&&(t.y-=g),s.save(),s.translate(t.x,t.y),p&&s.rotate(Math.atan2(u-t.y,p-t.x)+Math.PI/2),d(t),s.drawImage(i,h*m,0,m,r,-12,-31,m,r),s.restore()},Object.assign(t,e),t},M=function(e){this.monsterData={mx:0,my:0,w:42,h:31,px:0,py:0,speed:1,position:0,maxPosition:0,maxX:e.maxX,maxY:e.maxY,image:l.monster,monsterAppearOptions:[{x:"random",y:0},{x:"max",y:"random"},{x:"random",y:"max"},{x:0,y:"random"}]};var t=this.monsterData,n=t.monsterAppearOptions[m(4)];return Object.keys(n).forEach(function(e){var a=t["max".concat(e.toUpperCase())];switch(n[e]){case"random":t[e]=m(a);break;case"max":t[e]=a;break;default:t[e]=n[e]}}),t.draw=function(e,n){var a=e.ctx,s=t.h,o=t.image,r=t.speed,i=t.position,c=t.px,h=t.py,p=t.w,u=t.x,m=t.y,l=r,f=r,y=x(c,u),v=x(h,m);y>v?f=v/y*r:l=y/v*r,y<r&&v<r?"function"==typeof n&&n():(c>u?t.x+=l:c<u&&(t.x-=l),h>m?t.y+=f:h<m&&(t.y-=f),a.save(),a.translate(t.x,t.y),c&&a.rotate(Math.atan2(h-t.y,c-t.x)+Math.PI/2),d(t),a.drawImage(o,i*p,0,p,s,-12,-31,p,s),a.restore())},Object.assign(t,e),t},I=function(e){var t,n=e||{},a=n.drawSceneSpeed,s=n.monsterGenerateInterval,o=n.sceneName;this.sceneName=o||"scene",this.settings={drawSceneSpeed:a||16.66666666,monsterGenerateInterval:s||2e3},t=[{code:"explosion",src:"images/explosion.png"},{code:"monster",src:"images/monster.png"},{code:"rocket",src:"images/rocket.png"},{code:"sniper",src:"images/sniper.png"}],Array.isArray(t)||(t=[t]),t.forEach(function(e){try{l[e.code]=new Image,l[e.code].src=e.src}catch(t){console.error("Initialization failed!")}})};I.prototype.render=function(){var e=this,t=this.ctx,n=this.explosions,a=this.monsters,s=this.mouseMoveOffset,o=this.rockets,r=this.score,i=this.sniper,c=this.steps;t.clearRect(0,0,t.canvas.width,t.canvas.height),r.draw(e),i.draw(e,s),o.forEach(function(t,n){t.draw(e,function(){o.splice(n,1)})}),c.forEach(function(t,n){t.draw(e,function(){c.splice(n,1)})}),n.forEach(function(t,a){t.draw(e,function(){n.splice(a,1)})}),a.forEach(function(t,n){t.draw(e,function(){a.splice(n,1)})})},I.prototype.destroy=function(){var e=this.ctx,t=this.drawingInterval,n=this.monsterInterval,a=e.canvas,s=a.height,o=a.width;e.clearRect(0,0,o,s),clearInterval(n),clearInterval(t)},I.prototype.init=function(e,t){var n=this;this.canvas=document.getElementById(this.sceneName),this.ctx=this.canvas.getContext("2d"),this.explosions=[],this.monsters=[],this.rockets=[],this.steps=[],this.score=new f,this.sniper=new y,this.mouseMoveOffset={x:0,y:0};var a=this.canvas,s=this.mouseMoveOffset,o=this.rockets,r=this.settings,i=this.sniper,c=this.steps;this.render=this.render.bind(this),a.addEventListener("mousemove",function(e){s.x=e.pageX-e.target.offsetLeft,s.y=e.pageY-e.target.offsetTop}),this.drawingInterval=setInterval(function(){n.render()},r.drawSceneSpeed),this.monsterInterval=setInterval(function(){n.monsters.push(new M({px:i.x,py:i.y,mx:s.x,my:s.y,maxX:e,maxY:t}))},r.monsterGenerateInterval),a.addEventListener("mousedown",function(e){var t=e.originalEvent,n=e.which,a=e.layerX||0,r=e.layerY||0;switch(t&&t.layerX&&(a=t.layerX,r=t.layerY),n){case 1:o.push(new g({mx:s.x,my:s.y,px:a,py:r,x:i.x,y:i.y}));break;case 3:i.sniperLastMouseX=a,i.sniperLastMouseY=r,i.isMoving=!0,c.push(new v({x:a,y:r}))}})};var b=I,k=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){(new b).init(1e3,600)}},{key:"onContextMenu",value:function(e){return e.preventDefault(),!1}},{key:"render",value:function(){return s.a.createElement("canvas",{id:"scene",width:1e3,height:600,onContextMenu:this.onContextMenu})}}]),t}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.3f106021.chunk.js.map